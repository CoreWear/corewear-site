<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CoreWear &ndash; Products</title>
  <meta name="description" content="CoreWear product overview: tops, bottoms, business & workwear, dresses, sports & leisurewear, kidswear, and home. B2B production from 500 units." />

  <!-- SEO -->
  <link rel="canonical" href="https://corewear.pro/en/products/" />
  <link rel="alternate" hreflang="de" href="https://corewear.pro/de/products/" />
  <link rel="alternate" hreflang="en" href="https://corewear.pro/en/products/" />
  <link rel="alternate" hreflang="x-default" href="https://corewear.pro/en/products/" />

  <link rel="stylesheet" href="/assets/css/index.css" />
  <link rel="icon" type="image/png" href="/assets/img/favicon.png" />
  <meta name="referrer" content="strict-origin-when-cross-origin">
</head>
<body>
<header>
  <div class="header-bar">
    <!-- Logo -->
    <a href="/en/" class="brand">
      <img id="logo" src="/assets/img/Logo.png" alt="CoreWear logo" />
    </a>

    <!-- Hamburger (mobile only) -->
    <button class="hamburger" aria-label="Open menu" aria-controls="mobile-nav" aria-expanded="false">
      <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>

    <!-- Global navigation -->
    <nav id="mobile-nav" class="main-nav">
      <a href="/en/">Home</a>
      <a href="/en/products/" class="active" aria-current="page">Products</a>
      <a href="/en/process/">Process</a>
      <a href="/en/about/">About</a>
      <a href="/en/faq/">FAQ</a>
      <a href="/en/contact/" class="btn">Contact</a>

      <!-- Language switch -->
      <div class="lang-switch" role="group" aria-label="Language selection">
        <a class="lang-link" href="/de/" data-lang="de" role="button" aria-pressed="false" title="Deutsch">
          <img src="/assets/img/de.jpg" width="36" height="24" alt="Deutsch">
        </a>
        <a class="lang-link" href="/en/" data-lang="en" role="button" aria-pressed="true" aria-current="true" title="English">
          <img src="/assets/img/en.jpg" width="36" height="24" alt="English">
        </a>
      </div>
    </nav>
  </div>
</header>

<!-- Overlay behind the off-canvas navigation -->
<div class="nav-overlay" hidden></div>

<main>
  <div class="section-title">
    <h2>Products</h2>
  </div>
  <div class="hint-box">
    Click a product to see fabrics, production methods, and specifics.
  </div>

  <section class="product-layout">
    <div class="product-rows"><!-- Categories are injected via JS --></div>
  </section>

  <div class="section-title">
    <h2>Even More Possibilities</h2>
    <span class="muted">We&rsquo;re flexible — beyond the items listed here.</span>
  </div>

  <section class="grid cols-1">
    <article class="card">
      <p class="muted">
        Don&rsquo;t see your exact product? No problem — with our machinery and partner network, we&rsquo;re happy to assess feasibility.
      </p>
      <p class="muted">
        We can also <strong>recreate existing collections</strong> or <strong>co-develop new collections</strong> and produce them end-to-end.
        Whether single items or full service — you&rsquo;re in the right place.
      </p>
    </article>
  </section>
</main>

<footer>
  <div class="wrap">
    <small>© <span id="y"></span> CoreWear</small>
    <div style="display:flex;gap:14px">
      <a href="/en/legal/">Legal Notice</a>
      <a href="/en/privacy/">Privacy</a>
    </div>
  </div>
</footer>

<!-- Optional structured data -->
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"CollectionPage",
  "name":"CoreWear Products",
  "inLanguage":"en",
  "url":"https://corewear.pro/en/products/",
  "description":"CoreWear product overview for B2B garment manufacturing."
}
</script>

<script>
  // Year in footer
  document.getElementById('y').textContent = new Date().getFullYear();

  // Base image path (relative to /en/)
  // -> resolves to /en/resources/img/Clothes/...
  const IMG_BASE = "resources/img/Clothes";

  // URL-encode a single path segment (for spaces, umlauts, etc.)
  function encodePathSegment(seg){
    return encodeURIComponent(seg).replace(/%2F/gi, "/");
  }
  function buildImgPath(dir, baseName, ext){
    const safeDir = dir.split("/").map(encodePathSegment).join("/");
    const safeFile = encodePathSegment(baseName) + "." + ext;
    return `${IMG_BASE}/${safeDir}/${safeFile}`;
  }
  function buildAllImgPaths(dir, baseName){
    return {
      avif: buildImgPath(dir, baseName, "avif"),
      webp: buildImgPath(dir, baseName, "webp"),
      png:  buildImgPath(dir, baseName, "png")
    };
  }

  // =========================
  // Mobile-only scroll helpers
  // =========================
  const MOBILE_MAX = 959.98; // keep in sync with CSS breakpoint

  function isMobile() {
    return window.matchMedia(`(max-width: ${MOBILE_MAX}px)`).matches;
  }

  function getHeaderHeight() {
    const val = getComputedStyle(document.documentElement).getPropertyValue('--header-h').trim();
    const n = parseFloat(val);
    return Number.isFinite(n) ? n : 64;
  }

  function scrollToPanel(panelEl) {
    if (!panelEl) return;
    const extraOffset = 10;
    const y = panelEl.getBoundingClientRect().top + window.scrollY - getHeaderHeight() - extraOffset;
    window.scrollTo({ top: y, behavior: 'smooth' });
  }

  // =========================
  // Categories (English folder names for images; English UI labels)
  // =========================
  const CATEGORIES = [
    {
      title: "Tops",
      dir: "Tops",
      items: [
        { name: "Blouses" },
        { name: "Hoodies" },
        { name: "Polo Shirts" },
        { name: "Shirts" },
        { name: "Sweaters" },
        { name: "Sweatshirts" },
        { name: "Tank Tops" },
        { name: "Tops" },
        { name: "T-Shirts" },
        { name: "Vests" }
      ]
    },
    {
      title: "Bottoms",
      dir: "Bottoms",
      items: [
        { name: "Chinos" },
        { name: "Suit Trousers" },
        { name: "Jeans" },
        { name: "Joggers" },
        { name: "Leggings" },
        { name: "Maxi Skirts" },
        { name: "Midi Skirts" },
        { name: "Mini Skirts" },
        { name: "Shorts" }
      ]
    },
    {
      title: "Business & Workwear",
      dir: "Business & Workwear",
      items: [
        { name: "Bib Overalls" },
        { name: "Coverall (Men)" },
        { name: "Protective Trousers" },
        { name: "Safety Vests" },
        { name: "Suits (Jacket + Trousers)" },
        { name: "Coverall (Women)" },
        { name: "Womens Suits (Blazer + Trousers)" },
        { name: "Womens Suits (Blazer + Skirt)" },
        { name: "Work Jackets" }
      ]
    },
    {
      title: "Dresses",
      dir: "Dresses",
      items: [
        { name: "Business Dresses" },
        { name: "Cocktail Dresses" },
        { name: "Evening Dresses" },
        { name: "Maxi Dresses" },
        { name: "Sheath Dresses" },
        { name: "Summer Dresses" }
      ]
    },
    {
      title: "Sports & Leisurewear",
      dir: "Sports & Leisurewear",
      items: [
        { name: "Baseball Jerseys" },
        { name: "American Football Jerseys" },
        { name: "Soccer Jerseys" },
        { name: "Cycling Shorts" },
        { name: "Tracksuits" },
        { name: "Performance Shirts" },
        { name: "Sports Bras" },
        { name: "Training Sets" }
      ]
    },
    {
      title: "Kidswear",
      dir: "Kidswear",
      items: [
        { name: "Baby Bodysuits" },
        { name: "Boys School Uniforms" },
        { name: "Girls School Uniforms" },
        { name: "Kids Jackets" },
        { name: "Kids T-Shirts" },
        { name: "Rompers" }
      ]
    },
    {
      title: "Home",
      dir: "Home",
      items: [
        { name: "Bathrobes" },
        { name: "Towels" },
        { name: "Bath Mats" },
        { name: "Duvets" },
        { name: "Pillowcases" },
        { name: "Bed Sheets" },
        { name: "Tablecloths" },
        { name: "Napkins" }
      ]
    }
  ];

  // =========================
  // Product details (English UI text) – keys must match item.name exactly
  // =========================
  const ITEM_DETAILS = {
    // ---------- Tops ----------
    "Blouses": {
      fabrics: ["Fine wovens: viscose, TENCEL™ Lyocell, crepe de chine (90&ndash;140 GSM)"],
      methods: ["French/felled seams", "Button plackets, piping details", "Relaxed or tailored fit"],
      notes: ["Soft drape, low creasing", "Options: concealed placket, ruffles, cuff variants"]
    },
    "Hoodies": {
      fabrics: ["Fleece 300&ndash;420 GSM (brushed)", "French terry 280&ndash;360 GSM"],
      methods: ["Coverstitch seams", "Kangaroo pocket, lined hood", "Rib at hem & cuffs"],
      notes: ["Heavyweight streetwear possible", "Large-format print/embroidery, optional zipper"]
    },
    "Polo Shirts": {
      fabrics: ["Piqué 180&ndash;240 GSM (cotton/poly)", "Interlock 170&ndash;210 GSM"],
      methods: ["Reinforced placket", "Collar with interlining", "Hem side vents with bartacks"],
      notes: ["Corporate-wear ready", "Options: contrast collar/cuffs, embroidered logo"]
    },
    "Shirts": {
      fabrics: ["Poplin, Oxford, twill (110&ndash;160 GSM)"],
      methods: ["Collars (Kent, button-down)", "Chest pocket optional", "Clean interior finishing"],
      notes: ["Slim/regular/relaxed fits", "Options: easy-iron finish"]
    },
    "Sweaters": {
      fabrics: ["Wool blends (Merino/poly)", "Cotton knit, fine gauge"],
      methods: ["Fully-fashioned linking", "1x1 / 2x2 rib trims", "Raglan or set-in sleeves"],
      notes: ["Premium, shape-retaining", "Options: wash effects, textured knits"]
    },
    "Sweatshirts": {
      fabrics: ["French terry 260&ndash;340 GSM", "Loopback jersey"],
      methods: ["Flatlock seams", "Set-in or raglan sleeves", "Rib trims"],
      notes: ["Print/embroidery, appliqués", "Classic streetwear silhouettes"]
    },
    "Tank Tops": {
      fabrics: ["Single jersey 160&ndash;200 GSM", "Performance jersey (poly)"],
      methods: ["Bound edges (single/double)", "Armhole/neck binding"],
      notes: ["Sport or layering", "Options: racerback, loose fit"]
    },
    "Tops": {
      fabrics: ["Modal/viscose jersey", "Rib jersey 180&ndash;220 GSM"],
      methods: ["Coverstitched hems", "Concealed zipper (dressy)"],
      notes: ["From basics to fashion", "Options: cropped, cut-outs"]
    },
    "T-Shirts": {
      fabrics: ["Single jersey 160&ndash;220 GSM (organic cotton on request)"],
      methods: ["Tubular or side seams", "Neck tape, shoulder-to-shoulder tape"],
      notes: ["Oversized/boxy possible", "Reactive prints, DTG, DTF, screen print"]
    },
    "Vests": {
      fabrics: ["Quilted nylon/poly with padding", "Fleece vests 220&ndash;300 GSM"],
      methods: ["Front zipper with chin guard", "Quilt patterns: horizontal/diamond"],
      notes: ["Lightweight layering", "Options: softshell vest, water-repellent"]
    },

    // ---------- Bottoms ----------
    "Chinos": {
      fabrics: ["Stretch twill 240&ndash;300 GSM", "Cotton/elastane"],
      methods: ["Waistband with belt loops", "Hook & bar, back welt pockets"],
      notes: ["Business casual", "Fits: tapered/regular"]
    },
    "Suit Trousers": {
      fabrics: ["Fine wool/poly blends", "Gabardine/twill 200&ndash;260 GSM"],
      methods: ["Crease line, lining to knee", "Hook & bar + button, heel tape at hem"],
      notes: ["Suit-compatible", "Matching jacket fabrics available"]
    },
    "Jeans": {
      fabrics: ["Denim 11&ndash;14 oz (cotton/elastane)"],
      methods: ["Chainstitch seams, rivets", "YKK zipper or button fly"],
      notes: ["Stone/enzyme wash possible", "Fits from skinny to loose"]
    },
    "Joggers": {
      fabrics: ["French terry 280&ndash;340 GSM", "Tech jersey (sport)"],
      methods: ["Elastic waistband with drawcord", "Rib cuffs at hem"],
      notes: ["Sport/streetwear", "Option: zipped side pockets"]
    },
    "Leggings": {
      fabrics: ["High-stretch interlock 220&ndash;280 GSM", "Nylon/spandex (squat-proof)"],
      methods: ["Flatlock seams to reduce chafe", "Wide shaping waistband"],
      notes: ["Performance use", "Option: side phone pocket"]
    },
    "Maxi Skirts": {
      fabrics: ["Viscose crêpe, satin", "Jersey (casual)"],
      methods: ["Concealed zip/elastic waist", "Clean hems"],
      notes: ["Fluid drape", "Options: slit, allover print"]
    },
    "Midi Skirts": {
      fabrics: ["Satin/crepe 120&ndash;180 GSM", "Textured wovens"],
      methods: ["Shaped waistband, darts", "Optional lining"],
      notes: ["Business/fashion", "Options: A-line/pleated"]
    },
    "Mini Skirts": {
      fabrics: ["Twill/denim", "Faux leather (fashion)"],
      methods: ["Darts, back/side zip", "Fixed hem or raw edge (denim)"],
      notes: ["Trend piece", "Options: belt/eyelet details"]
    },
    "Shorts": {
      fabrics: ["Twill/chino", "French terry (casual)"],
      methods: ["Waist: elastic+cord or hook", "Pockets: slant front, welt back"],
      notes: ["Summer/teamwear", "Options: contrast stitching, prints"]
    },

    // ---------- Business & Workwear ----------
    "Bib Overalls": {
      fabrics: ["Heavy twill 300&ndash;360 GSM", "Poly/cotton 65/35"],
      methods: ["Triple seams, knee reinforcement", "Multi tool pockets"],
      notes: ["Durable", "Options: reflective piping, stretch panels"]
    },
    "Coverall (Men)": {
      fabrics: ["Twill/canvas 260&ndash;320 GSM"],
      methods: ["Front zip, elastic back", "Cordura® reinforcements optional"],
      notes: ["Industry-ready", "Options: name patch, company branding"]
    },
    "Protective Trousers": {
      fabrics: ["Ripstop, twill, blends", "Optional: FR to spec"],
      methods: ["Triple seams, knee pad pockets", "Reflective bands"],
      notes: ["Standards per brief (e.g., EN ISO)", "High abrasion resistance"]
    },
    "Safety Vests": {
      fabrics: ["Hi-vis mesh/jersey", "Certified reflective tapes"],
      methods: ["Bound edges/overlock", "Front hook & loop closure"],
      notes: ["EN-compliant neon colors", "Large back print optional"]
    },
    "Suits (Jacket + Trousers)": {
      fabrics: ["Wool/poly/elastane", "Fine yarns, 200&ndash;260 GSM"],
      methods: ["Half/full canvas options", "AMF stitching, lining & welt pockets"],
      notes: ["Grading & size charts", "Business-quality series production"]
    },
    "Coverall (Women)": {
      fabrics: ["Crepe/poly blends", "Stretch twill for comfort"],
      methods: ["Waist shaping, concealed zip", "Belt/tie option"],
      notes: ["Business to fashion", "Options: wide leg, culotte"]
    },
    "Womens Suits (Blazer + Trousers)": {
      fabrics: ["Wool/poly stretch", "Combed look"],
      methods: ["Tailored blazer, lining", "Cigarette trousers with crease"],
      notes: ["Feminine cut", "CI colors possible"]
    },
    "Womens Suits (Blazer + Skirt)": {
      fabrics: ["Wool/poly blends", "Fine structures"],
      methods: ["Blazer with lapels, knee-length skirt", "Lining, piping"],
      notes: ["Business set", "Options: pencil or flared skirt"]
    },
    "Work Jackets": {
      fabrics: ["Twill/softshell", "Optional fleece lining"],
      methods: ["Reinforced elbows", "Multiple pockets, zipped pockets"],
      notes: ["Robust zippers", "Options: reflective details, branding"]
    },

    // ---------- Dresses ----------
    "Business Dresses": {
      fabrics: ["Ponte Roma, scuba knit", "Viscose blends"],
      methods: ["Darts, body-skimming", "Concealed back zip, optional lining"],
      notes: ["Classic knee length", "Options: 3/4 sleeves, slit"]
    },
    "Cocktail Dresses": {
      fabrics: ["Satin, crepe, lace"],
      methods: ["Lining, seam tape", "Decorative details: ruffles, draping"],
      notes: ["Event-ready", "Options: glitter/applications"]
    },
    "Evening Dresses": {
      fabrics: ["Chiffon, satin, silk looks"],
      methods: ["Multi-layered, lined", "Richer construction, optional corsage"],
      notes: ["Floor length", "Options: beading, slit"]
    },
    "Maxi Dresses": {
      fabrics: ["Viscose, rayon, light wovens"],
      methods: ["Elasticated waist", "Placket/tie belt"],
      notes: ["Fluid & airy", "Option: allover print"]
    },
    "Sheath Dresses": {
      fabrics: ["Structured wovens, stretch crepe"],
      methods: ["Sheath cut, darts", "Concealed back zip"],
      notes: ["Business elegant", "Option: contrast piping"]
    },
    "Summer Dresses": {
      fabrics: ["Light cotton/linen", "Viscose jersey"],
      methods: ["Strap options, buttons", "Optional ruffle hem"],
      notes: ["Breathable", "Options: AOP print, embroidery"]
    },

    // ---------- Sports & Leisurewear ----------
    "Baseball Jerseys": {
      fabrics: ["Poly mesh/interlock"],
      methods: ["Front button placket", "Contrast piping, team appliqués"],
      notes: ["Names/numbers customizable", "Sublimation or flock"]
    },
    "American Football Jerseys": {
      fabrics: ["Robust poly mesh"],
      methods: ["Reinforced shoulder seams", "Wide sleeves for pads"],
      notes: ["Team colors & logos", "Numbers front/back/sleeves"]
    },
    "Soccer Jerseys": {
      fabrics: ["Light poly interlock"],
      methods: ["Breathable inserts", "Raglan or set-in sleeves"],
      notes: ["Quick-drying", "Custom club designs"]
    },
    "Cycling Shorts": {
      fabrics: ["Compression fabric 220&ndash;260 GSM"],
      methods: ["Flatlock seams", "Multi-density chamois"],
      notes: ["Grippy leg hems", "Reflective details optional"]
    },
    "Tracksuits": {
      fabrics: ["French terry 300&ndash;360 GSM"],
      methods: ["Hoodie + jogger set", "Drawcords, metal eyelets"],
      notes: ["Street & team", "Option: panel AOP"]
    },
    "Performance Shirts": {
      fabrics: ["Microfiber poly with antibacterial finish"],
      methods: ["Raglan (low seams)", "Flatlock stitching"],
      notes: ["Moisture management", "Option: mesh panels"]
    },
    "Sports Bras": {
      fabrics: ["Nylon/spandex compression"],
      methods: ["Double-layer, elastic underband", "Removable pads"],
      notes: ["Low/mid/high support options", "Reinforced straps"]
    },
    "Training Sets": {
      fabrics: ["Poly tricot", "Warmer knit for winter"],
      methods: ["Jacket + pants, zippers", "Contrast piping"],
      notes: ["Teamwear", "Numbers/logos possible"]
    },

    // ---------- Kids ----------
    "Baby Bodysuits": {
      fabrics: ["Organic cotton interlock 180&ndash;220 GSM"],
      methods: ["Nickel-free snaps", "Envelope shoulders"],
      notes: ["Skin-friendly", "Certifications on request (e.g., OEKO-TEX)"]
    },
    "Boys School Uniforms": {
      fabrics: ["Polos/vests: piqué & twill"],
      methods: ["Durable construction", "Badging/logos"],
      notes: ["Standardized sizing", "Repeat orders at scale"]
    },
    "Girls School Uniforms": {
      fabrics: ["Blouses/skirts: poplin/twill"],
      methods: ["Pleats, adjustable waistband", "Button plackets"],
      notes: ["Easy care", "CI colors possible"]
    },
    "Kids Jackets": {
      fabrics: ["Softshell, quilted, fleece"],
      methods: ["Easy-use zippers", "Reflective details"],
      notes: ["Weather-ready per brief", "Option: name label inside"]
    },
    "Kids T-Shirts": {
      fabrics: ["Cotton jersey 160&ndash;200 GSM"],
      methods: ["Soft seams", "Shoulder-to-shoulder tape"],
      notes: ["Skin-friendly", "Kid-appropriate prints"]
    },
    "Rompers": {
      fabrics: ["Interlock/rib", "High cotton content"],
      methods: ["Front zip/button placket", "Leg snaps"],
      notes: ["Easy on/off", "Option: closed/open feet"]
    },

    // ---------- Home ----------
    "Bathrobes": {
      fabrics: ["Terry 320&ndash;450 GSM (100% cotton or bamboo-viscose blend)", "Waffle 220&ndash;300 GSM (lighter)"],
      methods: ["Double side seams/overlock", "Belt, loops, patch pockets", "Shawl collar or hood"],
      notes: ["Pre-washed to reduce shrinkage", "Option: chest/sleeve embroidery", "Personalization (monogram) possible"]
    },
    "Bath Mats": {
      fabrics: ["Terry 700&ndash;900 GSM (high pile)", "Optional anti-slip backing (latex/TPR)"],
      methods: ["Binding with double topstitch", "Jacquard or border patterns"],
      notes: ["High absorbency", "Option: anti-slip coating", "Standard & hotel sizes available"]
    },
    "Duvets": {
      fabrics: ["Down-proof cotton percale 230&ndash;300 TC", "Microfiber shell 70&ndash;110 GSM"],
      methods: ["Box or cassette quilting", "Piped edges, hang loops"],
      notes: ["Fillings: down/feather or hollow fiber", "Warmth levels (summer/transitional/winter)", "Option: washable to 60 °C (hollow fiber)"]
    },
    "Pillowcases": {
      fabrics: ["Cotton sateen 300&ndash;400 TC", "Percale 200&ndash;300 TC", "Jersey 160&ndash;190 GSM"],
      methods: ["Hotel flap or zipper", "3 cm hem, optional piping"],
      notes: ["Soft & breathable", "Options: embroidery/piping", "Standard & special sizes"]
    },
    "Bed Sheets": {
      fabrics: ["Jersey 140&ndash;180 GSM with elastane (fitted)", "Percale/sateen 120&ndash;160 GSM (flat sheet)"],
      methods: ["All-around elastic (fitted)", "Double hems, mitred corners"],
      notes: ["Shape-retaining, soft hand", "Option: deep pockets for tall mattresses", "CI color palette"]
    },
    "Tablecloths": {
      fabrics: ["Poly/cotton 180&ndash;240 GSM", "Stain-repellent finish (e.g., Teflon®)"],
      methods: ["2&ndash;3 cm hems, woven jacquards", "Mitred corners"],
      notes: ["Easy care, easy iron", "Options: round/oval/custom sizes", "Logo weaving/allover possible"]
    },
    "Napkins": {
      fabrics: ["Cotton/twill 180&ndash;220 GSM", "Damask/jacquard for hospitality"],
      methods: ["Narrow hem 1&ndash;1.5 cm", "Mitred corners, double topstitch"],
      notes: ["High fold stability", "Options: logo embroidery, overlock edge", "Sets to match tablecloths"]
    },
    "Towels": {
      fabrics: ["Terry 450&ndash;650 GSM"],
      methods: ["Double-stitched hems", "Hanging loops"],
      notes: ["Soft & absorbent", "Hotel sizing on request"]
    }
  };

  // ===== Render =====
  const rowsWrap = document.querySelector('.product-rows');

  function createRow(cat, index){
    const row = document.createElement('section');
    row.className = 'category-row';
    row.dataset.catIndex = index;

    row.innerHTML = `
      <div class="row-head">
        <h3>${cat.title}</h3>
      </div>
      <div class="row-items"></div>
      <div class="info-slot"></div>
    `;

    const itemsWrap = row.querySelector('.row-items');

    cat.items.forEach((it) => {
      const baseName = it.file || it.name; // filename = item name
      const urls = buildAllImgPaths(cat.dir, baseName);

      const card = document.createElement('button');
      card.className = 'product-card';
      card.type = 'button';

      // Build <picture> with avif/webp sources and PNG as fallback
      // JS onerror chain ensures fallback if a chosen file is missing (404).
      const picture = document.createElement('picture');
      picture.innerHTML = `
        <source type="image/avif" srcset="${urls.avif}">
        <source type="image/webp" srcset="${urls.webp}">
        <img src="${urls.png}" alt="${it.name}">
      `;

      const imgEl = picture.querySelector('img');
      let triedWebp = false;
      let triedPng = false;

      imgEl.addEventListener('error', () => {
        // If AVIF 404s (or unsupported and WebP 404s), step down manually.
        if (!triedWebp) {
          triedWebp = true;
          imgEl.src = urls.webp;
          return;
        }
        if (!triedPng) {
          triedPng = true;
          imgEl.src = urls.png;
          return;
        }
        // Give up after PNG to avoid loops.
      });

      card.appendChild(picture);

      const titleEl = document.createElement('span');
      titleEl.className = 'pc-title';
      titleEl.textContent = it.name;
      card.appendChild(titleEl);

      card.addEventListener('click', (e) => {
        const panel = showInfoInline(cat, it, row);
        if (isMobile() && e.target && (e.target.tagName === 'IMG' || e.target.tagName === 'SOURCE')) {
          scrollToPanel(panel);
        }
      });

      itemsWrap.appendChild(card);
    });

    return row;
  }

  function showInfoInline(cat, item, rowEl){
    const title = item.name;
    const det = ITEM_DETAILS[title] || {};

    const fabrics = det.fabrics || [];
    const methods = det.methods || [];
    const notes = det.notes || [];

    const panel = document.createElement('article');
    panel.className = 'card info-inline';
    panel.innerHTML = `
      <div class="info-inline-head">
        <h3>${title}</h3>
      </div>
      <div class="info-grid">
        <div>
          <h4>Fabrics</h4>
          <ul>${fabrics.length ? fabrics.map(f => `<li>${f}</li>`).join('') : '<li>Per brief</li>'}</ul>
        </div>
        <div>
          <h4>Production</h4>
          <ul>${methods.length ? methods.map(m => `<li>${m}</li>`).join('') : '<li>Per brief</li>'}</ul>
        </div>
        <div>
          <h4>Notes</h4>
          <ul>${notes.length ? notes.map(n => `<li>${n}</li>`).join('') : '<li>Per brief</li>'}</ul>
        </div>
      </div>
    `;

    const slot = rowEl.querySelector('.info-slot');
    slot.innerHTML = '';
    slot.appendChild(panel);

    const h3 = panel.querySelector('.info-inline-head h3');
    if (h3) {
      h3.setAttribute('tabindex', '-1');
      h3.focus({ preventScroll: true });
    }

    return panel;
  }

  CATEGORIES.forEach((c, i) => rowsWrap.appendChild(createRow(c, i)));

  if ('scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
  }

  // ===== Off-canvas navigation toggle =====
  (function () {
    const btn = document.querySelector('.hamburger');
    const nav = document.getElementById('mobile-nav');
    const overlay = document.querySelector('.nav-overlay');

    if (!btn || !nav || !overlay) return;

    function openMenu() {
      document.body.classList.add('menu-open');
      overlay.hidden = false;
      btn.setAttribute('aria-expanded', 'true');
      const firstLink = nav.querySelector('a');
      if (firstLink) firstLink.focus({preventScroll:true});
    }
    function closeMenu() {
      document.body.classList.remove('menu-open');
      overlay.hidden = true;
      btn.setAttribute('aria-expanded', 'false');
      btn.focus({preventScroll:true});
    }
    function toggleMenu() {
      if (document.body.classList.contains('menu-open')) closeMenu();
      else openMenu();
    }

    btn.addEventListener('click', toggleMenu);
    overlay.addEventListener('click', closeMenu);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && document.body.classList.contains('menu-open')) {
        closeMenu();
      }
    });

    nav.addEventListener('click', (e) => {
      const a = e.target.closest('a');
      if (a) closeMenu();
    });
  })();

  // ===== Language switch: dynamic target & preference =====
  (function(){
    const box = document.querySelector('.lang-switch'); if(!box) return;
    const links = box.querySelectorAll('.lang-link');

    // Pfad normalisieren: /index/ -> /, Query/Hash entfernen, doppelte Slashes glätten
    const norm = (p)=>{
      if(!p.startsWith('/')) p = '/' + p;
      p = p.split('#')[0].split('?')[0];
      // /index oder /index/ -> /
      p = p.replace(/\/index(?:\/)?$/i, '/');
      // .../seite/ -> .../seite/
      p = p.replace(/\/$/i, '/');
      p = p.replace(/\/{2,}/g,'/');
      return p;
    };

    const path = norm(location.pathname);
    const m = path.match(/^\/(de|en)(\/.*)?$/);
    const currentLang = m ? m[1] : null;
    const rest = m ? (m[2] || '/') : '/products/';

    // Set target links for both languages (preserve subpage)
    links.forEach(a=>{
      const lang = a.dataset.lang;
      a.href = `/${lang}${rest === '/' ? '/' : rest}`;
      a.setAttribute('aria-pressed', lang === currentLang ? 'true' : 'false');
    });

    // Store preference on click
    box.addEventListener('click', e=>{
      const a = e.target.closest('.lang-link'); if(!a) return;
      try{ localStorage.setItem('cw_lang', a.dataset.lang); }catch(_){}
    });

    // If someone lands without /de or /en/, redirect to preferred route of this page
    if(!currentLang){
      let pref = null; try{ pref = localStorage.getItem('cw_lang'); }catch(_){}
      const fallback = (navigator.language||'en').toLowerCase().startsWith('de') ? 'de' : 'en';
      const target = pref || fallback;
      location.replace(`/${target}/products/`);
    }
  })();
</script>

</body>
</html>
