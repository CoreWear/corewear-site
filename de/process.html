<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CoreWear &ndash; Prozess</title>
  <meta name="description" content="So arbeiten wir: Vom Briefing über Stoffprüfung, Zuschnitt, Nähen und Veredelung bis zu QC, Verpackung und Logistik." />

  <!-- SEO -->
  <link rel="canonical" href="https://corewear.pro/de/process/" />
  <link rel="alternate" hreflang="de" href="https://corewear.pro/de/process/" />
  <link rel="alternate" hreflang="en" href="https://corewear.pro/en/process/" />
  <link rel="alternate" hreflang="x-default" href="https://corewear.pro/en/process/" />

  <link rel="stylesheet" href="/assets/css/index.css" />
  <link rel="icon" type="image/png" href="/assets/img/favicon.png" />
  <meta name="referrer" content="strict-origin-when-cross-origin">
</head>
<body>
  <header>
    <div class="header-bar">
      <a href="/de/" class="brand">
        <img id="logo" src="/assets/img/Logo.png" alt="CoreWear Logo" loading="lazy" decoding="async" />
      </a>

      <!-- Hamburger (nur Mobile) -->
      <button class="hamburger" aria-label="Menü öffnen" aria-controls="mobile-nav" aria-expanded="false">
        <svg width="26" height="26" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <nav id="mobile-nav" class="main-nav">
        <a href="/de/">Start</a>
        <a href="/de/products.html">Produkte</a>
        <a href="/de/process.html" class="active" aria-current="page">Prozess</a>
        <a href="/de/about.html">Über uns</a>
        <a href="/de/faq.html">FAQ</a>
        <a href="/de/contact.html" class="btn">Kontakt</a>
        <!-- ▶️ Sprachschalter (DE | EN) – Bildvariante -->
        <div class="lang-switch" role="group" aria-label="Sprachauswahl">
          <a class="lang-link" href="/de/" data-lang="de" role="button" aria-pressed="false" title="Deutsch">
            <img src="/assets/img/de.jpg">
          </a>
          <a class="lang-link" href="/en/" data-lang="en" role="button" aria-pressed="false" title="English">
            <img src="/assets/img/en.jpg">
          </a>
        </div>
      </nav>
    </div>
  </header>

  <!-- Overlay für Off-Canvas -->
  <div class="nav-overlay" hidden></div>

  <main>
    <!-- Kopfbereich -->
    <section class="hero" style="grid-template-columns:1fr; margin-top:24px">
      <div class="hero-card">
        <h1>So arbeiten wir</h1>
        <p class="sub">
          Transparent, planbar, industriell: Von der ersten Skizze bis zur Auslieferung. Mit QC-Gates, sauberer Doku und verlässlichen Timelines.
        </p>
        <div class="badges">
          <span class="badge">Direkte Fabrikpartner</span>
          <span class="badge">QC &ndash; Inline &amp; Final</span>
          <span class="badge">CAD/CAM Zuschnitt</span>
          <span class="badge">Export &amp; Logistik</span>
        </div>
      </div>
    </section>

    <!-- Steps -->
    <div class="section-title">
      <h2>Prozess in 7 Schritten</h2>
      <span class="muted">Jeder Schritt ist dokumentiert &ndash; mit klaren Freigaben und Qualitätskontrollen.</span>
    </div>

    <section class="steps">
      <!-- 1 Briefing -->
      <article class="card step">
        <div>
          <h3>1. Briefing &amp; Konzept</h3>
          <p class="muted">Ziele, Stückzahlen, Budget, Timeline. Skizzen/Referenzen oder Tech Pack willkommen.</p>
          <ul>
            <li>Materialvorschläge &amp; passende Grammaturen</li>
            <li>CI-Vorgaben &amp; Brandingoptionen (Stick/Druck/Labels)</li>
            <li>Erste Machbarkeits- und Risikoanalyse</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Zeichnung.jpg" alt="Skizze/Design-Entwurf" loading="lazy" decoding="async">
      </article>

      <!-- 2 Materialeingang & Stoffprüfung -->
      <article class="card step">
        <div>
          <h3>2. Materialeingang &amp; Stoffprüfung</h3>
          <p class="muted">Wareneingangskontrolle nach Spezifikation, Lagerung klimaneutral.</p>
          <ul>
            <li>Stoffkontrolle am Leuchttisch (Fehler, Schattierungen)</li>
            <li>Gewichtsprüfung (GSM) &amp; Handgefühl</li>
            <li>Batch/Charge dokumentiert für Rückverfolgbarkeit</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Textil%20Stoffkontrolle.jpg" alt="Stoffkontrollmaschine" loading="lazy" decoding="async">
      </article>

      <!-- 3 CAD/CAM & Zuschnitt -->
      <article class="card step">
        <div>
          <h3>3. CAD/CAM &amp; Zuschnitt</h3>
          <p class="muted">Schnittbilder per CAD, effizienter Wareneinsatz, exakte Größenläufe.</p>
          <ul>
            <li>Marker-Optimierung &ndash; Verschnitt minimieren</li>
            <li>Automatischer Cutter oder Handzuschnitt je nach Stoff</li>
            <li>Teilekennzeichnung für fehlerfreien Nähfluss</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Modellhaus-Cad-Cam.jpg" alt="CAD/CAM Zuschnitt" loading="lazy" decoding="async">
      </article>

      <!-- 4 Nähen & Inline-QC -->
      <article class="card step">
        <div>
          <h3>4. Nähen &amp; Inline-QC</h3>
          <p class="muted">Linienaufbau nach Produkt: Jersey, Webware, Denim, Workwear.</p>
          <ul>
            <li>Sticharten gemäß Tech Pack (z. B. Flatlock, Cover, Kettenstich)</li>
            <li>Inline-Kontrollen nach definierten QC-Gates</li>
            <li>Rework-Schleife und Ursachenanalyse bei Abweichungen</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Schneidemaschine.jpg" alt="Näh-/Produktionsdetail" loading="lazy" decoding="async">
      </article>

      <!-- 5 Veredelung / Waschen -->
      <article class="card step">
        <div>
          <h3>5. Veredelung &amp; Waschen</h3>
          <p class="muted">Je nach Produkt: Drucken, Sticken, Wascheffekte, Thermofixierung.</p>
          <ul>
            <li>DTF/DTG/Siebdruck, Stickerei, Heat-Transfer</li>
            <li>Enzyme/Stone/Micro-Wash für Denim &amp; Fleece</li>
            <li>Fixieröfen &amp; Trockner nach Spezifikation</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Waschmaschienen.jpg" alt="Industriewaschmaschinen" loading="lazy" decoding="async">
      </article>

      <!-- 6 Endkontrolle & Branding -->
      <article class="card step">
        <div>
          <h3>6. Endkontrolle &amp; Branding</h3>
          <p class="muted">Finale Prüfung &amp; vollständiges Branding vor dem Verpacken.</p>
          <ul>
            <li>AQL-Sampling auf Wunsch &amp; unabhängige Inspektionen</li>
            <li>Hangtags, Pflegeetiketten, Barcodes, Größensticker</li>
            <li>Folding/Polybag/Kartonage nach Kundenvorgabe</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Stoffkontrolle%20Wiegen.jpg" alt="Qualitätsmessung/Wiegen" loading="lazy" decoding="async">
      </article>

      <!-- 7 Versand & Dokumente -->
      <article class="card step">
        <div>
          <h3>7. Versand &amp; Dokumente</h3>
          <p class="muted">Export-Ready: sauber gepackt, palettiert und etikettiert.</p>
          <ul>
            <li>Seefracht, Luftfracht oder EU-LKW &ndash; je nach Timeline</li>
            <li>Packlisten, Zolldokumente, Ursprungsnachweise</li>
            <li>Tracking &amp; Übergabe an deine Logistik oder 3PL</li>
          </ul>
        </div>
        <img class="thumb" src="resources/img/Prozess/Schneidemaschiene2.jpg" alt="Produktionsdetail Maschine" loading="lazy" decoding="async">
      </article>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <small>© <span id="y"></span> CoreWear</small>
      <div style="display:flex;gap:14px">
        <a href="legal.html">Impressum</a>
        <a href="privacy.html">Datenschutz</a>
      </div>
    </div>
  </footer>

<script>
// ==================================================
// Footer-Jahr
// ==================================================
document.getElementById('y').textContent = new Date().getFullYear();

// ==================================================
// Bild-Lazy-Loader (AVIF → WebP → Original (jpg/png))
//  - funktioniert mit vorhandenen <img class="thumb" src="...">
//  - JS ersetzt jedes <img.thumb> zur Laufzeit durch <picture>
//  - lädt Quellen erst bei Sichtkontakt (IO + Queue)
// ==================================================

// 1x1 Platzhalter (gegen Layout-Shift)
const PLACEHOLDER_1PX =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGMAAQAABQABDQottQAAAABJRU5ErkJggg==";

// Pfad-Helfer
function encodePathSegment(seg){
  return encodeURIComponent(seg).replace(/%2F/gi, "/");
}
function splitPathname(pathname){
  // z.B. "/de/resources/img/Prozess/Zeichnung.jpg"
  const lastSlash = pathname.lastIndexOf("/");
  const dir = pathname.slice(0, lastSlash);             // "/de/resources/img/Prozess"
  const file = pathname.slice(lastSlash + 1);           // "Zeichnung.jpg"
  const dot = file.lastIndexOf(".");
  const base = dot >= 0 ? file.slice(0, dot) : file;    // "Zeichnung"
  const ext  = dot >= 0 ? file.slice(dot + 1) : "";     // "jpg"
  return { dir, file, base, ext: ext.toLowerCase() };
}
function buildPathsFromImgSrc(src){
  const u = new URL(src, location.href);
  const { dir, base, ext } = splitPathname(u.pathname);

  // Dateiname sicher kodieren (nur den Namen, Verzeichnis bleibt wie ist)
  const safeBase = encodePathSegment(decodeURIComponent(base));

  const avif = `${dir}/${safeBase}.avif`;
  const webp = `${dir}/${safeBase}.webp`;
  const orig = `${dir}/${safeBase}.${ext || "jpg"}`; // Original-Endung als letzte Stufe
  return { avif, webp, orig, isPng: ext === "png" };
}

// Request-Queue (max. 6 gleichzeitige Bildaktivierungen)
class ImageQueue {
  constructor(max=6){
    this.max = max;
    this.running = 0;
    this.q = [];
  }
  add(task){
    this.q.push(task);
    this._run();
  }
  _run(){
    while(this.running < this.max && this.q.length){
      const t = this.q.shift();
      this.running++;
      Promise.resolve().then(t).catch(()=>{}).finally(()=>{
        this.running--;
        this._run();
      });
    }
  }
}
const loaderQueue = new ImageQueue(6);

// IntersectionObserver: aktiviert <picture> erst kurz vor Sichtbarkeit
const io = ('IntersectionObserver' in window)
  ? new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(!entry.isIntersecting) return;

        const img = entry.target;              // <img.thumb> im <picture>
        io.unobserve(img);

        loaderQueue.add(async ()=>{
          const picture = img.parentElement;
          const sAvif = picture.querySelector('source[type="image/avif"]');
          const sWebp = picture.querySelector('source[type="image/webp"]');

          // Lazy aktivieren (data-srcset/src -> echte Attribute)
          if(sAvif && sAvif.dataset.srcset) sAvif.srcset = sAvif.dataset.srcset;
          if(sWebp && sWebp.dataset.srcset) sWebp.srcset = sWebp.dataset.srcset;
          if(img.dataset.src) img.src = img.dataset.src;

          img.decoding = 'async';
          img.fetchPriority = 'low';

          // Aufräumen
          if(sAvif) sAvif.removeAttribute('data-srcset');
          if(sWebp) sWebp.removeAttribute('data-srcset');
          img.removeAttribute('data-src');
        });
      });
    }, { rootMargin: '200px' })
  : null; // Fallback ohne IO: Quellen sofort setzen

// Bestehende <img.thumb> in <picture> umwandeln (ohne HTML anfassen zu müssen)
(function hydrateProcessImages(){
  const thumbs = document.querySelectorAll('img.thumb[src]');
  thumbs.forEach(origImg=>{
    const { avif, webp, orig } = buildPathsFromImgSrc(origImg.getAttribute('src'));

    // <picture> + <source> + neues <img> (behält class="thumb")
    const picture = document.createElement('picture');

    const sAvif = document.createElement('source');
    sAvif.type = 'image/avif';
    sAvif.setAttribute('data-srcset', avif);

    const sWebp = document.createElement('source');
    sWebp.type = 'image/webp';
    sWebp.setAttribute('data-srcset', webp);

    const img = document.createElement('img');
    img.className = origImg.className || '';
    img.alt = origImg.alt || '';
    img.src = PLACEHOLDER_1PX;      // bis IO triggert
    img.setAttribute('data-src', orig); // native Fallback (Browser wählt aus <source>, sonst dieses)
    img.decoding = 'async';
    img.loading = 'lazy';
    img.fetchPriority = 'low';

    // Wenn die final gewählte Quelle fehlschlägt → manuelle Kaskade
    let triedWebp = false;
    let triedOrig = false;
    img.addEventListener('error', ()=>{
      if(!triedWebp){ triedWebp = true; img.src = webp; return; }
      if(!triedOrig){ triedOrig = true; img.src = orig; return; }
    });

    picture.appendChild(sAvif);
    picture.appendChild(sWebp);
    picture.appendChild(img);

    // Original-IMG im DOM durch <picture> ersetzen
    origImg.replaceWith(picture);

    // Lazy starten
    if(io) io.observe(img);
    else {
      // Ohne IO sofort laden (kein Lazy)
      sAvif.srcset = avif;
      sWebp.srcset = webp;
      img.src = orig;
    }
  });
})();

// ==================================================
// Navigation Toggle (wie index/products)
// ==================================================
(function () {
  const btn = document.querySelector('.hamburger');
  const nav = document.getElementById('mobile-nav');
  const overlay = document.querySelector('.nav-overlay');

  if (!btn || !nav || !overlay) return;

  function openMenu() {
    document.body.classList.add('menu-open');
    overlay.hidden = false;
    btn.setAttribute('aria-expanded', 'true');
    const firstLink = nav.querySelector('a');
    if (firstLink) firstLink.focus({preventScroll:true});
  }
  function closeMenu() {
    document.body.classList.remove('menu-open');
    overlay.hidden = true;
    btn.setAttribute('aria-expanded', 'false');
    btn.focus({preventScroll:true});
  }
  function toggleMenu() {
    if (document.body.classList.contains('menu-open')) closeMenu();
    else openMenu();
  }

  btn.addEventListener('click', toggleMenu);
  overlay.addEventListener('click', closeMenu);

  // ESC zum Schließen
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && document.body.classList.contains('menu-open')) {
      closeMenu();
    }
  });

  // Schließen beim Klick auf einen Link
  nav.addEventListener('click', (e) => {
    const a = e.target.closest('a');
    if (a) closeMenu();
  });
})();

// ==================================================
// Sprachschalter (wie gehabt)
// ==================================================
(function(){
  const box = document.querySelector('.lang-switch'); if(!box) return;
  const links = box.querySelectorAll('.lang-link');

  // Pfad normalisieren
  const norm = (p)=>{
    if(!p.startsWith('/')) p = '/'+p;
    p = p.split('#')[0].split('?')[0];
    p = p.replace(/\/index\.html?$/i,'/');
    p = p.replace(/\/{2,}/g,'/');
    return p;
  };

  const path = norm(location.pathname);
  const m = path.match(/^\/(de|en)(\/.*)?$/);
  const currentLang = m ? m[1] : null;
  const rest = m ? (m[2] || '/') : '/';

  // Ziel-Links setzen
  links.forEach(a=>{
    const lang = a.dataset.lang;
    a.href = `/${lang}${rest === '/' ? '/' : rest}`;
    a.setAttribute('aria-pressed', lang === currentLang ? 'true' : 'false');
  });

  // Präferenz speichern
  box.addEventListener('click', e=>{
    const a = e.target.closest('.lang-link'); if(!a) return;
    try{ localStorage.setItem('cw_lang', a.dataset.lang); }catch(_){}
  });

  // Erste Weiterleitung (wenn keine /de oder /en im Pfad)
  if(!currentLang){
    let pref = null; try{ pref = localStorage.getItem('cw_lang'); }catch(_){}
    const fallback = (navigator.language||'en').toLowerCase().startsWith('de') ? 'de' : 'en';
    const target = pref || fallback;
    location.replace(`/${target}/`);
  }
})();
</script>

</body>
</html>
